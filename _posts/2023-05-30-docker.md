---
title:  "도커(Docker)"
excerpt: "도커 이해하기"

categories:
  - Docker
tags:
  - [Docker Image, Docker Container]

toc: true
toc_sticky: true

date: 2023-05-30
last_modified_at: 2023-05-30
---

## 도커란  
소프트웨어 개발자가 Linux 컨테이너를 만들고 사용할 수 있도록 하는 **컨테이너 기반의 오픈 소스 가상화 플랫폼**  

개발자는 Docker를 사용하여 애플리케이션을 종속성과 함께 단일 컨테이너로 패키징하여 다양한 컴퓨팅 환경에서 **일관성과 이식성을 보장**할 수 있다. 또한, 소프트웨어 **개발 수명 주기를 간소화**하고 **리소스 활용도를 개선**하며 **확장성을 향상**할 수 있다.  

### 1. 도커 이미지(Image)  
도커 컨테이너 생성 및 실행에 필요한 코드, 런타임, 시스템 도구, 라이브러리 및 종속성을 포함하여 애플리케이션을 실행하는데 필요한 모든 것을 포함하는 독립 실행형 실행 패키지  

이미지는 **특정 시점의 가상 환경과 애플리케이션을 나타내는 스냅샷**으로 **변경 불가한(immutable)** 읽기 전용 파일이다. 이러한 이미지는 자체로 실행되는 것은 아니고 런타임 환경을 위한 템플릿으로 사용된다. 덕분에 일관성이 보장되어 개발자는 동일한 조건에서 소프트웨어를 실행할 수 있다.  
- 도커 이미지 검색  
  ```bash  
  docker search {image}
  ```  
- 현재 Host 머신의 이미지 목록  
  ```bash  
  docker images
  ```  
- 특정 이미지 삭제  
  ```bash  
  docker image rm {image id}
  ```  
  ```bash  
  docker image rm {image name}
  ```  
<br><br>  

### 2. 도커 이미지 리포지토리  
#### 2-1. 도커 레지스트리(Docker Registry)  
**도커 이미지의 저장 및 배포 시스템**  

도커 레지스트리를 사용하면 조직에서 내부적으로 도커 이미지를 저장하고 공유하는 자체 개인 리포지토리를 호스팅하고 관리할 수 있다.  
(민감하거나 독점적인 이미지를 유지하여 보안을 강화)  

#### 2-2. 도커 허브(Docker Hub)  
빌드한 컨테이너 이미지를 저장하고 다른 사람과 공유할 수 있는 **중앙 집중식 리포지토리**  
(Docker에서 제공하는 클라우드 기반 공용 레지스트리의 특정 구현) (커뮤니티 기반 플랫폼 역할)  

도커 허브를 통해 도커 이미지의 버전 관리 및 배포가 가능하다.  
<br><br>  

### 3. Dockerfile  
도커 이미지를 생성하기 위한 **스크립트**  

**애플리케이션의 환경과 종속성을 정의**하여 다양한 개발, 테스트 및 프로덕션 환경에서 일관된 배포가 가능하다.  
- Dockerfile을 통한 이미지 빌드  
  ```bash  
  docker build -t {image name} .
  ```  
- Dockerfile을 다른 파일명으로 작성 후 이미지 빌드  
  ```bash  
  docker build -t {image name} -f {Dockerfile name} .
  ```  
  명령어 마지막에 '.' 은 Dockerfile이 있는 현재 디렉토리로 빌드 컨텍스트가 된다.  
  빌드 컨텍스트를 기준으로 상위 폴더로 올라가게 되면 빌드 컨텍스트에서 벗어나는 것이므로 오류 발생의 원인이 된다.  
  (ex. Dockerfile 내 COPY 명령문에서 상대경로 작성 시 현재 디렉토리나 하위 디렉토리만 사용)  

#### 3-1. Dockerfile 작성법  
```bash  

```
도커는 Dockerfile에 나열된 명령문을 차례대로 수행하면서 이미지를 생성한다.  
- 장점  
  - 배포 시 용량이 큰 이미지 파일보다는 Dockerfile 만 배포한 후 실행시켜 사용하도록 하면 편리하게 배포가 가능하다.  
  - 
<br><br>  

### 4. 도커 컨테이너(Container)  
애플리케이션을 실행하는 데 필요한 모든 필수 소프트웨어, 라이브러리 및 종속성을 포함하는 가볍고 격리된 환경  

이미지를 기반으로 여러 컨테이너를 생성할 수 있고, 컨테이너가 삭제되더라도 컨테이너를 생성할 때 사용한 이미지는 그대로 남아있다.  

컨테이너는 매우 가벼운 모듈식 가상 머신처럼 다룰 수 있으며 구축, 배포, 복사, 다른 환경으로 이동을 통해 애플리케이션을 클라우드에 최적화할 수 있다. 기본 운영 체제나 인프라에 관계없이 Docker를 지원하는 모든 시스템에서 배포 및 실행이 가능하다.  

컨테이너를 생성하면 쓰기 가능한 레이어가 불변하는 베이스 이미지 위에 추가되어 
<br><br>  

## 도커 컴포즈(Docker Compose)  

<br><br>  

## 우분투에서 도커 사용하기  
